<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Language" content="en-us">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      Our build system
    </title>
    <link rel="stylesheet" href="../sumatra.css" type="text/css" />
    <link rel="stylesheet" href="../notion.css" type="text/css" />
  </head>
  <body>
    <script type="text/javascript" src="../sumatra.js">
    </script>
    <div id="container">
      <div id="banner">
        <h1 style="display:inline;">
          Sumatra PDF
          				
          <font size="-1">
            is a PDF, ePub, MOBI, CHM, XPS, DjVu, CBZ, CBR reader for Windows
          </font>
        </h1>
        <script type="text/javascript">
          				document.write(navHtml());
          			
        </script>
      </div>
      <br/>
      <div id="center">
        <div class="content">
          <div class="notion-page" id="3114db56-b1a5-4b9b-b026-da6b92d36a80">
            <div class="breadcrumbs">
              <div>
                <a href="SumatraPDF-documentation.html">
                  SumatraPDF documentation
                </a>
              </div>
              <div>
                /
              </div>
              <div>
                Our build system
              </div>
            </div>
            <div id="00f0fa58-6c6c-4d0f-8c99-b4d2d5a2efec" class="">
            </div>
            <div id="e7eddc6f-83a4-4732-b9b1-4788cf7d13e1" class="">
              Our build system uses 
              <a href="http://premake.github.io/download.html#v5">
                Premake5
              </a>
              . For convenience, we store the binary in 
              <code>
                bin
              </code>
              directory.
            </div>
            <div id="73853a7f-3999-46a9-8a8c-69897cad4e80" class="">
              Premake generates Visual Studio solution in directory 
              <code>
                vs2019 
              </code>
              from 
              <code>
                premake5.lua
              </code>
              file. Generated solution files are stored in the repository for convenience.
            </div>
            <h2 id="10f0c6b7-798e-4985-9a29-262bd48f3b17" class="">
              Running
            </h2>
            <div id="15385ea5-b0fa-4e04-94a4-a3219c3d4512" class="">
              You only have to worry about premake if you add new source files, since that requires re-generating Visual Studio solution. To make changes, modify 
              <code>
                premake5.lua
              </code>
              and/or 
              <code>
                premake5.files.lua
              </code>
              .
            </div>
            <div id="9b9c204e-1df4-4708-81eb-53118742e5d3" class="">
              Download premake 5 from http://premake.github.io/download.html#v5. I put it in bin directory. Run 
              <code>
                bin\premake5 vs2017
              </code>
              and 
              <code>
                bin\premake5 vs2015
              </code>
              to re-generate Visual Studio project files.
            </div>
            <h2 id="1ef75d10-fcc5-4ff7-89c2-c1391a1acd71" class="">
              Customizing build
            </h2>
            <div id="3b6713c7-36b6-4fbb-b0e7-b0d247082a48" class="">
              Sometimes we want to customize the build with 
              <code>
                #ifdef
              </code>
              . We could do it by adding additional configurations, but that can spiral out of control quickly.
            </div>
            <div id="d72b2707-84de-46bf-9806-917f0123d90e" class="">
              Instead we have 
              <code>
                src\utils\BuildConfig.h 
              </code>
              file. It&#x27;s empty by default but you can changed it to add your 
              <code>
                #define
              </code>
              customizations.
            </div>
            <h2 id="8815bf40-2c44-4b07-bf38-0e3d2ef0d0ab" class="">
              How official builds are made
            </h2>
            <div id="a33eb2e0-ea6b-4679-8761-647b46b543c2" class="">
              I use 
              <a href="https://golang.org/">
                Go
              </a>
              program 
              <code>
                tools\build\main.go.
              </code>
              You can read it for details of operation.
            </div>
            <div id="b9ca4d5f-8562-4c37-870b-631face260a3" class="">
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>